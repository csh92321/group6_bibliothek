<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.care.root.mybatis.book.BookMapper">

<resultMap id="book"  type="com.care.root.book.dto.BookDTO">
      <id property="bookNum" column="book_num" />
      <result property="title" column="title" />
      <result property="subtitle" column="subtitle" />
      <result property="writer" column="writer"/>
      <result property="company" column="company" />
      <result property="hit" column="hit" />
      <result property="grade" column="grade" />
      <result property="likeCnt" column="like_cnt" />
      <result property="totalPage" column="total_page" />
      <result property="bookIntro" column="BOOK_INTRODUCTION" />
      <result property="contentsTable" column="TABLE_OF_CONTENTS" />
      <result property="writerIntro" column="WRITER_INTRODUCTION" />
   </resultMap>
   
   <select id="bookList" resultMap="book">
      select book_num, title, subtitle, writer, company from book where book_num=#{bookNum}
   </select>
   
   <select id="bookSearch" resultMap="book">
      select book_num, title, subtitle, writer, company from book where title LIKE #{search}
   </select>

   <select id="detail" resultMap="book">
      select book_num, title, subtitle, writer, company, BOOK_INTRODUCTION, TABLE_OF_CONTENTS, WRITER_INTRODUCTION from book where book_num=#{bookNum}
   </select>
   
   <update id="hitPlus">
      update book set hit=#{hit} where book_num=#{bookNum}
   </update>
     
   <select id="hitLoad" resultType="int">
      select hit from book where book_num=#{bookNum}
   </select>
   
   <select id="getHit" resultMap="book">
      select book_num, hit from book where hit=#{num}
   </select>
   
    <select id="getAll" resultMap="book">
      select * from book where book_num=#{bookNum}
   </select>
   

</mapper>